<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>{% block title %}{% endblock %} - TitoCode</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="{{asset('assets/Semantic-UI/semantic.min.css')}}">
    <link rel="stylesheet" href="{{asset('assets/css/base.css')}}">
    <link rel="stylesheet" href="{{asset('assets/css/vendor.css')}}">
    <link rel="stylesheet" href="{{asset('assets/css/main.css')}}">

    <!-- ICONS LINK -->
    <style>
        .featured-slider .slick-prev {
            background-image: url({{ asset('assets/img/icons/icon-arrow-left.svg') }});
        }

        .featured-slider .slick-next {
            right: -120px;
            background-image: url({{ asset('assets/img/icons/icon-arrow-right.svg') }});
        }

        .s-footer__subscribe #mc-form input[type="email"] {
            background: url({{ asset('assets/img/icons/icon-mail.svg') }}) 20px center no-repeat, rgba(0, 0, 0, 0.25);
        }

        .go-top a, .go-top a:visited {
            background-image: url({{ asset('assets/img/icons/icon-arrow-up.svg') }});
        }

        #map-wrap #map-zoom-in {
            background-image: url({{ asset('assets/img/icons/icon-plus.svg') }});
        }

        #map-wrap #map-zoom-out {
            background-image: url({{ asset('assets/img/icons/icon-minus.svg') }});
        }

        .pgn__prev {
            background-image: url("{{ asset('assets/img/icons/icon-arrow-left.svg') }}");
        }

        .pgn__next {
            background-image: url("{{ asset('assets/img/icons/icon-arrow-right.svg') }}");
        }

        .header__search-trigger {
            background-image: url({{ asset('assets/img/icons/icon-search.svg') }});
        }
    </style>

    {% block stylesheets %}{% endblock %}

    <!-- script
    ================================================== -->
    <script src="{{asset('assets/js/modernizr.js')}}"></script>

    <!-- favicons
    ================================================== -->
    <link rel="shortcut icon" href="{{ asset('assets/img/favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ asset('assets/img/favicon.ico') }}" type="image/x-icon">

</head>

<body id="top">

    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader" class="dots-fade">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>


    <!-- header
    ================================================== -->
    <header class="s-header header">

        <div class="header__logo">
            <a class="logo" href="{{ path('index') }}">
                <img src="{{asset('assets/img/logo-titocode.png')}}" alt="Homepage">
            </a>
        </div> <!-- end header__logo -->

        <a class="header__search-trigger" href="#0"></a>
        <div class="header__search">

            <div class="header__search-form">
                <label>
                    <span class="hide-content">Rechercher :</span>
                    <input type="search" class="search-field" placeholder="Mots clés" value="" name="word" title="Rechercher :" autocomplete="off">
                </label>
                <!-- <input type="submit" class="search-submit" value="Rechercher"> -->
            </div>

            <a href="#0" title="Fermer la recherche" class="header__overlay-close">Close</a>

        </div>  <!-- end header__search -->

        <a class="header__toggle-menu" href="#0" title="Menu"><span>Menu</span></a>
        <nav class="header__nav-wrap">

            <h2 class="header__nav-heading h6">Aller à</h2>

            <ul class="header__nav">
                <li class="current"><a href="{{ path('index') }}" title="">Accueil</a></li>
                <li class="has-children">
                    <a href="#0" title="">Catégories</a>
                    <ul class="sub-menu menu-categorys">

                    </ul>
                </li>
                <!-- <li class="has-children">
                    <a href="#0" title="">Les tutoriels</a>
                    <ul class="sub-menu">
                        <li><a href="">Tutoriels écrit</a></li>
                        <li><a href="">Tutoriels vidéo</a></li>
                        {# <li><a href="single-standard.html">Standard Post</a></li> #}
                    </ul>
                </li> -->
                {# <li><a href="style-guide.html" title="">Styles</a></li> #}
                <li><a href="{{ path('about') }}" title="">A propos</a></li>
                <li><a href="{{ path('contact') }}" title="">Contactez-nous</a></li>
            </ul> <!-- end header__nav -->

            <a href="#0" title="Close Menu" class="header__overlay-close close-mobile-menu">Fermer</a>

        </nav> <!-- end header__nav-wrap -->

    </header> <!-- s-header -->

    {% block body %}{% endblock %}

    <!-- s-extra
    ================================================== -->
    <section class="s-extra">

        <div class="row">

            <div class="col-seven md-six tab-full popular">
                <h3>Articles populaire</h3>

                <div class="block-1-2 block-m-full popular__posts popularPost">


                </div>
            </div> <!-- end popular -->

            <div class="col-four md-six tab-full end">
                <div class="row">
                    <div class="col-six md-six mob-full categories">
                        <h3>Categories</h3>

                        <ul class="linklist linklist-category">

                        </ul>
                    </div> <!-- end categories -->

                    <div class="col-six md-six mob-full sitelinks">
                        <h3>Site Links</h3>

                        <ul class="linklist">
                            <li><a href="{{path('index')}}">Accueil</a></li>
                            <li><a href="{{path('about')}}">À propos</a></li>
                            <li><a href="{{path('contact')}}">Contactez-nous</a></li>
                            <li><a href="#">Informations légales</a></li>
                            <!-- <li><a href="#0">Contact</a></li>
                            <li><a href="#0">Privacy Policy</a></li> -->
                        </ul>
                    </div> <!-- end sitelinks -->
                </div>
            </div>
        </div> <!-- end row -->

    </section> <!-- end s-extra -->


    <!-- s-footer
    ================================================== -->
    <footer class="s-footer">

        <div class="s-footer__main">
            <div class="row">

                <div class="col-six tab-full s-footer__about">

                    <h4>À propos de Titocode</h4>

                    <p>Titocode est un blog réunissant toutes sortes de tutoriels liés au développement web et applicatif. Fondé en fin 2018 par <a href="https://www.cascales.fr/">Grégory Cascales</a>, le but de ce site est de partager notre savoir à des développeurs débutants, amateurs ou même expérimentés.
                    Notre diversité dans les languages de programmation permettra ainsi d'élargir, au fil du temps, les catégories de nos tutoriels.</p>

                </div> <!-- end s-footer__about -->

                <div class="col-six tab-full s-footer__subscribe">

                    <h4>Notre Newsletter</h4>

                    <p>Aucun spam ni de mails inutile, vous serez juste averti pour chaque nouveauté en lien avec Titocode, on vous le promet !</p>

                    <div class="subscribe-form">
                        <div id="mc-form" class="group" novalidate="true">

                            <input type="email" value="" name="emailNewsletters" class="email emailNewsletters" id="mc-email" placeholder="Adresse email" required="">

                            <input type="submit" class="subNewsletters" name="subNewsletters" value="S'inscrire">

                            <label for="mc-email" id="submessage" class="subscribe-message"></label>

                        </div>
                    </div>

                </div> <!-- end s-footer__subscribe -->

            </div>
        </div> <!-- end s-footer__main -->

        <div class="s-footer__bottom">
            <div class="row">

                <div class="col-six">
                    <ul class="footer-social">
                        <!-- <li>
                            <a href="#0"><i class="fab fa-facebook"></i></a>
                        </li> -->
                        <li>
                            <a href="https://twitter.com/grasgouz/"><i class="fab fa-twitter"></i></a>
                        </li>
                        <li>
                            <a href="https://instagram.com/gzcls"><i class="fab fa-instagram"></i></a>
                        </li>
                        <!-- <li>
                            <a href="#0"><i class="fab fa-youtube"></i></a>
                        </li>
                        <li>
                            <a href="#0"><i class="fab fa-pinterest"></i></a>
                        </li> -->
                    </ul>
                </div>

                <div class="col-six">
                    <div class="s-footer__copyright">
                        <span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> Tous droits réservés | Développé avec <i class="fa fa-heart" aria-hidden="true"></i> par <a href="https://www.cascales.fr" target="_blank">GCascales</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
</span>
                    </div>
                </div>

            </div>
        </div> <!-- end s-footer__bottom -->

        <div class="go-top">
            <a class="smoothscroll" title="Back to Top" href="#top"></a>
        </div>

    </footer> <!-- end s-footer -->


    <!-- Java Script
    ================================================== -->
    <script src="{{asset('assets/js/jquery-3.2.1.min.js')}}"></script>
    <script src="{{asset('assets/Semantic-UI/semantic.min.js')}}"></script>
    <script src="{{asset('assets/js/plugins.js')}}"></script>
    <script src="{{asset('assets/js/main.js')}}"></script>
    <script>
        $(document).ready(function(){
            //ajax for catégories
            $.ajax({
                async: true,
                type: 'POST',
                url: "{{ path('getCategorys') }}",
                success: function (data) {
                    $.each(data, function(i, v) {
                        var url = '{{ path("category", {"id": "region_id"}) }}';
                        url = url.replace("region_id", v.id);
                        resultHTML = '<li><a href="'+url+'">'+v.name+'</a></li>';
                        $('.menu-categorys').append(resultHTML);
                        $('.linklist-category').append(resultHTML);
                    })
                },
            });

            //ajax for articlesPop
            $.ajax({
                async: true,
                type: 'POST',
                url: "{{ path('getArticlesPop') }}",
                success: function (data) {
                    $.each(data, function(i, v) {
                        var url = '{{ path("article-standard", {"id": "region_id"}) }}';
                        url = url.replace("region_id", v.id);
                        resultHTML = '<article class="col-block popular__post"><a href="'+url+'" class="popular__thumb"><img src="{{asset("publicThumb") | imagine_filter('mini_thumb') }}" alt=""></a><h5>'+v.title+'</h5><section class="popular__meta"><span class="popular__author"><span>Par</span> <a href="https://www.cascales.fr/">Grégory Cascales</a></span> <span class="popular__date"><span>-</span> '+v.vue+' vue(s)</span></section></article>';
                        resultHTML = resultHTML.replace("publicThumb", v.publicThumb);
                        $('.popularPost').append(resultHTML);
                    })
                },
            });

            /* Newsletter
             * ------------------------------------------------------ */
             var clAjaxChimp = function() {

               function isEmail(email) {
                  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                  return regex.test(email);
                }

               $(".subNewsletters").click(function(){
                 var error = null;
                 //ERRORS
                 if($(".emailNewsletters").val() == '' || !isEmail($(".emailNewsletters").val())){
                   error = "Un email valide est obligatoire !";
                 }
                 if(error == null){
                     $('#submessage').html("Traitement...");
                     urlAj = "{{ path('newsletter', {'email' : "region_email"}) }}";
                     urlAj = urlAj.replace( "region_email", $(".emailNewsletters").val() );
                     $.ajax({
                         async: true,
                         type: 'POST',
                         url : urlAj,
                         success: function (data) {
                           if(data != 1){
                             if(data == "Email déjà utilisé !"){
                                $('#submessage').html(data);
                             } else {
                                $('#submessage').html('Problème lors de l\'inscription, si le problème persiste réessayez ultérieurement !');
                             }
                           } else {
                             $('#submessage').html('Un email de confirmation vous à été envoyé !');
                           }
                         },
                         error: function (){
                           $('#submessage').html('Problème lors de l\'inscription, si le problème persiste réessayez ultérieurement !');
                         },
                     });
                 } else {
                   $('#submessage').html(error);
                 }
               })

                 var errors = {
                     'submit': 'Traitement...',
                     0: '<i class="fas fa-check"></i> Nous vous avons envoyé un email de confimation !',
                     1: '<i class="fas fa-exclamation-circle"></i> Une adresse email est obligatoire pour s\'inscrire aux newsletters.',
                     2: '<i class="fas fa-exclamation-circle"></i> Votre email n\'est pas valide.',
                     3: '<i class="fas fa-exclamation-circle"></i> Votre email n\'est pas valide.',
                     4: '<i class="fas fa-exclamation-circle"></i> Votre email n\'est pas valide.',
                     5: '<i class="fas fa-exclamation-circle"></i> Votre email n\'est pas valide.'
                 }
             };

             (function clInit() {
                 clAjaxChimp();
             })();

             //SEARCH SEND
             $('.search-field').keypress(function (e) {
               var key = e.which;
               if(key == 13)  // the enter key code
                {
                  var url = '{{ path("rechercher", {"word": "region_word"}) }}';
                  url = url.replace("region_word", $(this).val());
                  $(location).attr('href', url)
                  return false;
                }
              });

        });
    </script>

    {% block javascripts %}
    {% endblock %}

</body>

</html>
